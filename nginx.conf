server {
	listen 80;
	listen [::]:80;
	server_name localhost;

	root /usr/share/nginx/html;
	index index.html index.htm;

	location / {
		try_files $uri $uri/ /index.html;
	}

	server_tokens off;
	add_header X-Frame-Options "SAMEORIGIN" always;
	add_header X-Content-Type-Options "nosniff" always;
	add_header Referrer-Policy "strict-origin-when-cross-origin" always;
	add_header Permissions-Policy "()" always;
	add_header Content-Security-Policy "default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' data:; font-src 'self'; connect-src 'self'; object-src 'none'; frame-ancestors 'none'; base-uri 'self'; form-action 'self';" always;

	location ~* ^/assets/ {
		expires 1y;
		add_header Cache-Control "public, immutable, no-transform";
	}

	location ~* \.(ico|jpg|jpeg|png|gif|webp|svg|woff2|woff|ttf)$ {
		expires 7d;
		add_header Cache-Control "public, no-transform, must-revalidate";
	}

	# redirect server error pages to the static page /50x.html
	error_page 500 502 503 504 /50x.html;
	location = /50x.html {
		root /usr/share/nginx/html;
	}
	gzip on;
	gzip_types text/css application/javascript image/svg+xml application/json;
	gzip_min_length 256;
	gzip_vary on;
}
